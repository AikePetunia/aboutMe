{"ast":null,"code":"var _jsxFileName = \"/home/aike/Development/aboutMe/src/components/DiscordActivity.tsx\",\n  _s = $RefreshSig$();\nimport \"../styles/discordActivity.css\";\nimport { useEffect, useState, useRef } from \"react\";\nimport { fetchLanyard } from \"../hooks/useLanyard\";\nimport { resolveEmojiUrl } from \"../utils/discordUtils\";\nimport { Spotify } from \"./discordActivity/Spotify\";\nimport { Obsidian } from \"./discordActivity/Obsidian\";\nimport { Code } from \"./discordActivity/Code\";\nimport { CustomStatus } from \"./discordActivity/CustomStatus\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport function DiscordActivity() {\n  _s();\n  var _data$spotify2, _data$spotify2$timest;\n  const [data, setData] = useState(null);\n  const [tick, setTick] = useState(0);\n  const lastFetchTime = useRef(Date.now());\n  const fetchData = async () => {\n    try {\n      const json = await fetchLanyard();\n      setData(json.data);\n      lastFetchTime.current = Date.now();\n    } catch (error) {\n      console.error(\"Error fetching Discord activity:\", error);\n    }\n  };\n  useEffect(() => {\n    fetchData();\n    const timer = setInterval(() => {\n      var _data$spotify, _data$spotify$timesta;\n      setTick(prev => prev + 1);\n      if (data !== null && data !== void 0 && (_data$spotify = data.spotify) !== null && _data$spotify !== void 0 && (_data$spotify$timesta = _data$spotify.timestamps) !== null && _data$spotify$timesta !== void 0 && _data$spotify$timesta.end) {\n        const now = Date.now();\n        // once start time of the music reaches the end, refetchs\n        if (now > data.spotify.timestamps.end + 3000) {\n          fetchData();\n        }\n\n        // refetching each 30s\n        if (now - lastFetchTime.current > 30000) {\n          fetchData();\n        }\n      }\n    }, 1000);\n    return () => clearInterval(timer);\n  }, [data === null || data === void 0 ? void 0 : (_data$spotify2 = data.spotify) === null || _data$spotify2 === void 0 ? void 0 : (_data$spotify2$timest = _data$spotify2.timestamps) === null || _data$spotify2$timest === void 0 ? void 0 : _data$spotify2$timest.end]);\n  if (!data) return /*#__PURE__*/_jsxDEV(\"p\", {\n    children: \"Cargando presencia...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 55,\n    columnNumber: 21\n  }, this);\n\n  // ! General Variables & Helpers\n\n  const dsStatus = data.discord_status;\n  const dsSpotify = data.spotify || null;\n  const dsActivites = data.activities || [];\n  const custom = data.activities.find(a => a.type === 4) || {};\n  const emojiUrl = custom !== null && custom !== void 0 && custom.emoji ? resolveEmojiUrl(custom.emoji) : null;\n  const statusText = (custom === null || custom === void 0 ? void 0 : custom.state) || \"\";\n\n  // ! Visual Studio Code Variables\n  const code = dsActivites.find(activity => activity.name === \"Visual Studio Code\");\n\n  // ! Spotify Variables - Only compute these if dsSpotify exists\n  const albumArt = (dsSpotify === null || dsSpotify === void 0 ? void 0 : dsSpotify.album_art_url) || \"\";\n\n  // ! Obsidian\n  const obsidian = dsActivites.find(activity => activity.name === \"Obsidian\");\n  const codeActivity = () => /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: !dsSpotify && !obsidian && code && /*#__PURE__*/_jsxDEV(Code, {\n      activity: code\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 43\n    }, this)\n  }, void 0, false);\n  const obsidianActivity = () => /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: !dsSpotify && !code && obsidian && /*#__PURE__*/_jsxDEV(Obsidian, {\n      activity: obsidian\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 43\n    }, this)\n  }, void 0, false);\n  const hyperExcepcionalCase = () => !dsSpotify && !code && !obsidian && /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"activity-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      className: \"activity-detail\",\n      children: \"No current activity\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(CustomStatus, {\n      emojiUrl: emojiUrl,\n      statusText: statusText\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 108,\n    columnNumber: 7\n  }, this);\n\n  /**\n   * @param (activities) - Componentes to work on transition\n   * @param (timeTransition) {number} - timeouts of transition\n   */\n  function transitionStatus(activities = [], timeTransition = 0) {}\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `ds-activity ${dsStatus} discord-container`,\n    children: dsActivites ? /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"activity\",\n        children: dsSpotify && /*#__PURE__*/_jsxDEV(Spotify, {\n          spotify: dsSpotify,\n          albumArt: albumArt,\n          emojiUrl: emojiUrl,\n          statusText: statusText\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 11\n      }, this)\n    }, void 0, false) : \"\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 120,\n    columnNumber: 5\n  }, this);\n}\n_s(DiscordActivity, \"tkCtHjnT6w7Vzxc9hHYyD3ljQZM=\");\n_c = DiscordActivity;\nexport default DiscordActivity;\nvar _c;\n$RefreshReg$(_c, \"DiscordActivity\");","map":{"version":3,"names":["useEffect","useState","useRef","fetchLanyard","resolveEmojiUrl","Spotify","Obsidian","Code","CustomStatus","jsxDEV","_jsxDEV","Fragment","_Fragment","DiscordActivity","_s","_data$spotify2","_data$spotify2$timest","data","setData","tick","setTick","lastFetchTime","Date","now","fetchData","json","current","error","console","timer","setInterval","_data$spotify","_data$spotify$timesta","prev","spotify","timestamps","end","clearInterval","children","fileName","_jsxFileName","lineNumber","columnNumber","dsStatus","discord_status","dsSpotify","dsActivites","activities","custom","find","a","type","emojiUrl","emoji","statusText","state","code","activity","name","albumArt","album_art_url","obsidian","codeActivity","obsidianActivity","hyperExcepcionalCase","className","transitionStatus","timeTransition","_c","$RefreshReg$"],"sources":["/home/aike/Development/aboutMe/src/components/DiscordActivity.tsx"],"sourcesContent":["import \"../styles/discordActivity.css\";\nimport { useEffect, useState, useRef } from \"react\";\nimport { fetchLanyard } from \"../hooks/useLanyard\";\nimport {\n  resolveActivityImage,\n  resolveEmojiUrl,\n  formatTimeDisplay,\n  formatMusicTime,\n} from \"../utils/discordUtils\";\nimport { Spotify } from \"./discordActivity/Spotify\";\nimport { Obsidian } from \"./discordActivity/Obsidian\";\nimport { Code } from \"./discordActivity/Code\";\nimport { CustomStatus } from \"./discordActivity/CustomStatus\";\nimport type { Activity } from \"types/discord\";\ntype Maybe<T> = T | null | undefined;\n\nexport function DiscordActivity() {\n  const [data, setData] = useState<any | null>(null);\n  const [tick, setTick] = useState(0);\n  const lastFetchTime = useRef<number>(Date.now());\n\n  const fetchData = async () => {\n    try {\n      const json = await fetchLanyard();\n      setData(json.data);\n      lastFetchTime.current = Date.now();\n    } catch (error) {\n      console.error(\"Error fetching Discord activity:\", error);\n    }\n  };\n\n  useEffect(() => {\n    fetchData();\n\n    const timer = setInterval(() => {\n      setTick((prev) => prev + 1);\n\n      if (data?.spotify?.timestamps?.end) {\n        const now = Date.now();\n        // once start time of the music reaches the end, refetchs\n        if (now > data.spotify.timestamps.end + 3000) {\n          fetchData();\n        }\n\n        // refetching each 30s\n        if (now - lastFetchTime.current > 30000) {\n          fetchData();\n        }\n      }\n    }, 1000);\n\n    return () => clearInterval(timer);\n  }, [data?.spotify?.timestamps?.end]);\n\n  if (!data) return <p>Cargando presencia...</p>;\n\n  // ! General Variables & Helpers\n  interface Activity {\n    name: string;\n    [key: string]: any;\n  }\n\n  interface SpotifyData {\n    [key: string]: any;\n  }\n\n  interface LanyardData {\n    discord_status: string;\n    spotify: SpotifyData | null;\n    data: {\n      activities: Activity[];\n    };\n  }\n\n  const dsStatus = data.discord_status;\n  const dsSpotify = data.spotify || null;\n  const dsActivites = data.activities || [];\n\n  const custom = data.activities.find((a: any) => a.type === 4) || {};\n  const emojiUrl = custom?.emoji ? resolveEmojiUrl(custom.emoji) : null;\n  const statusText = custom?.state || \"\";\n\n  // ! Visual Studio Code Variables\n  const code = dsActivites.find(\n    (activity: Activity) => activity.name === \"Visual Studio Code\"\n  );\n\n  // ! Spotify Variables - Only compute these if dsSpotify exists\n  const albumArt = dsSpotify?.album_art_url || \"\";\n\n  // ! Obsidian\n  const obsidian = dsActivites.find(\n    (activity: Activity) => activity.name === \"Obsidian\"\n  );\n\n  const codeActivity = () => (\n    <>{!dsSpotify && !obsidian && code && <Code activity={code} />}</>\n  );\n\n  const obsidianActivity = () => (\n    <>{!dsSpotify && !code && obsidian && <Obsidian activity={obsidian} />}</>\n  );\n\n  const hyperExcepcionalCase = () =>\n    !dsSpotify &&\n    !code &&\n    !obsidian && (\n      <div className=\"activity-container\">\n        <h3 className=\"activity-detail\">No current activity</h3>\n        <CustomStatus emojiUrl={emojiUrl} statusText={statusText} />\n      </div>\n    );\n\n  /**\n   * @param (activities) - Componentes to work on transition\n   * @param (timeTransition) {number} - timeouts of transition\n   */\n  function transitionStatus(activities = [], timeTransition = 0) {}\n  return (\n    <div className={`ds-activity ${dsStatus} discord-container`}>\n      {dsActivites ? (\n        <>\n          <div className=\"activity\">\n            {dsSpotify && (\n              <Spotify\n                spotify={dsSpotify}\n                albumArt={albumArt}\n                emojiUrl={emojiUrl}\n                statusText={statusText}\n              />\n            )}\n          </div>\n        </>\n      ) : (\n        \"\"\n      )}\n    </div>\n  );\n}\n\nexport default DiscordActivity;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}